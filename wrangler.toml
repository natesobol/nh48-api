name = "nh48-ssr"
main = "worker.js"
compatibility_date = "2026-01-05"

# Comprehensive routes for SSR rendering with SEO metadata
# All pages get server-rendered nav, footer, meta tags, and structured data
routes = [
  # Homepage
  { pattern = "nh48.info/", custom_domain = true },
  { pattern = "nh48.info/fr/", custom_domain = true },
  
  # Peak detail pages (dynamic)
  { pattern = "nh48.info/peak/*", custom_domain = true },
  { pattern = "nh48.info/fr/peak/*", custom_domain = true },
  
  # Catalog pages
  { pattern = "nh48.info/catalog", custom_domain = true },
  { pattern = "nh48.info/catalog/", custom_domain = true },
  { pattern = "nh48.info/fr/catalog", custom_domain = true },
  { pattern = "nh48.info/fr/catalog/", custom_domain = true },
  
  # Dataset pages
  { pattern = "nh48.info/dataset", custom_domain = true },
  { pattern = "nh48.info/dataset/", custom_domain = true },
  { pattern = "nh48.info/dataset/*", custom_domain = true },
  { pattern = "nh48.info/fr/dataset", custom_domain = true },
  { pattern = "nh48.info/fr/dataset/", custom_domain = true },
  { pattern = "nh48.info/fr/dataset/*", custom_domain = true },
  
  # Trail apps and maps
  { pattern = "nh48.info/trails", custom_domain = true },
  { pattern = "nh48.info/trails/", custom_domain = true },
  { pattern = "nh48.info/long-trails", custom_domain = true },
  { pattern = "nh48.info/long-trails/", custom_domain = true },
  { pattern = "nh48.info/fr/trails", custom_domain = true },
  { pattern = "nh48.info/fr/trails/", custom_domain = true },
  { pattern = "nh48.info/fr/long-trails", custom_domain = true },
  { pattern = "nh48.info/fr/long-trails/", custom_domain = true },
  
  # Pages directory (apps)
  { pattern = "nh48.info/pages/trails_app.html", custom_domain = true },
  { pattern = "nh48.info/pages/long_trails_app.html", custom_domain = true },
  { pattern = "nh48.info/pages/plant_catalog.html", custom_domain = true },
  { pattern = "nh48.info/pages/plant.html", custom_domain = true },
  
  # Plant catalog
  { pattern = "nh48.info/plant-catalog", custom_domain = true },
  { pattern = "nh48.info/plant/*", custom_domain = true },
  { pattern = "nh48.info/fr/plant-catalog", custom_domain = true },
  { pattern = "nh48.info/fr/plant/*", custom_domain = true },
  
  # Info/guide pages
  { pattern = "nh48.info/nh-4000-footers-guide.html", custom_domain = true },
  { pattern = "nh48.info/nh-4000-footers-info.html", custom_domain = true }
]

# R2 bucket binding for data storage
[[r2_buckets]]
binding = "NH48_DATA"
bucket_name = "nh48-data"
