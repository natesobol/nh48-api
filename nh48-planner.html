<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Peak Planning Tool | NH48</title>
    <meta
      name="description"
      content="Plan NH48 day-trip traverses with a drag-and-drop itinerary builder based on popular NH 4,000-footer groupings."
    />
    <script id="page-webpage-schema" type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "WebPage",
        "name": "Peak Planning Tool | NH48",
        "description": "Plan NH48 day-trip traverses with a drag-and-drop itinerary builder based on popular NH 4,000-footer groupings.",
        "url": "https://nh48.info/nh48-planner.html",
        "inLanguage": "en",
        "isPartOf": {
          "@type": "WebSite",
          "name": "NH48 API",
          "url": "https://nh48.info/"
        }
      }
    </script>
    <script id="page-breadcrumb-schema" type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "BreadcrumbList",
        "itemListElement": [
          {
            "@type": "ListItem",
            "position": 1,
            "name": "Home",
            "item": "https://nh48.info/"
          },
          {
            "@type": "ListItem",
            "position": 2,
            "name": "NH48 Guide",
            "item": "https://nh48.info/nh-4000-footers-info"
          },
          {
            "@type": "ListItem",
            "position": 3,
            "name": "Peak Planning Tool",
            "item": "https://nh48.info/nh48-planner.html"
          }
        ]
      }
    </script>
    <script id="page-image-schema" type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "ImageObject",
        "name": "Owl's Head fall foliage banner",
        "description": "Owl's Head primary summit image used as the Peak Planning Tool hero banner.",
        "url": "https://photos.nh48.info/cdn-cgi/image/format=jpg,quality=85,width=1200/owls-head/owls-head__001.jpg",
        "contentUrl": "https://photos.nh48.info/owls-head/owls-head__001.jpg",
        "thumbnailUrl": "https://photos.nh48.info/cdn-cgi/image/format=jpg,quality=85,width=800/owls-head/owls-head__001.jpg"
      }
    </script>
    <link rel="icon" href="/favicons/favicon.ico" sizes="48x48" />
    <link rel="icon" type="image/x-icon" href="/favicons/favicon.ico" />
    <link rel="stylesheet" href="/css/quick-browse-footer.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans:wght@400;600;700&display=swap"
      rel="stylesheet"
    />
    <script type="module" src="/js/i18n.js"></script>
    <style>
      :root {
        --background: #0a0a0a;
        --surface: #111522;
        --card: #171b2b;
        --text: #f8fafc;
        --muted: #cbd5f5;
        --border: rgba(255, 255, 255, 0.14);
        --primary: #22c55e;
        --primary-strong: #4ade80;
        --accent: #38bdf8;
        --template-help-green: #22c55e;
        --menu-surface: rgba(8, 12, 24, 0.97);
        --menu-border: rgba(148, 163, 184, 0.35);
        --submenu-shadow: 0 14px 32px rgba(2, 6, 23, 0.62);
        --shadow: 0 18px 40px rgba(5, 8, 20, 0.45);
      }
      * {
        box-sizing: border-box;
      }
      body {
        margin: 0;
        font-family: 'Noto Sans', system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
        background: var(--background);
        color: var(--text);
        -webkit-font-smoothing: antialiased;
      }
      a {
        color: var(--primary);
      }
      a:hover {
        color: var(--primary-strong);
      }
      .wrap {
        max-width: 1200px;
        margin: 0 auto;
        padding: 18px 20px 70px;
      }
      .section {
        margin: 30px 0;
      }
      .planner-breadcrumbs {
        display: flex;
        flex-wrap: wrap;
        align-items: center;
        gap: 6px;
        margin: 0 0 12px;
        font-size: 0.84rem;
        color: var(--muted);
      }
      .planner-breadcrumbs a {
        color: #86efac;
        text-decoration: underline;
        text-underline-offset: 2px;
      }
      .planner-breadcrumbs .crumb-current {
        color: #e2e8f0;
        font-weight: 600;
      }
      .section-banner {
        position: relative;
        width: 100%;
        min-height: 250px;
        background-size: cover;
        background-position: center;
        border-radius: 16px;
        padding: 22px 24px;
        margin-bottom: 16px;
        display: flex;
        align-items: flex-end;
        box-shadow: var(--shadow);
        overflow: hidden;
      }
      .section-banner::before {
        content: '';
        position: absolute;
        inset: 0;
        background: linear-gradient(180deg, rgba(0, 0, 0, 0.25) 0%, rgba(3, 6, 17, 0.75) 80%);
        border-radius: inherit;
        pointer-events: none;
      }
      .section-banner h2 {
        position: relative;
        z-index: 1;
        margin: 0;
        font-size: clamp(1.8rem, 3vw, 2.3rem);
        font-weight: 600;
        text-shadow: 0 2px 12px rgba(0, 0, 0, 0.45);
      }
      .section-banner h2 a {
        text-decoration: none;
        color: #ffffff;
      }
      .planner-shell {
        background: var(--surface);
        border-radius: 18px;
        border: 1px solid var(--border);
        padding: 22px;
        display: grid;
        gap: 18px;
        box-shadow: var(--shadow);
        position: relative;
      }
      .planner-command-bar {
        position: sticky;
        top: 76px;
        z-index: 40;
        display: grid;
        grid-template-columns: minmax(220px, 0.9fr) minmax(220px, 1fr) minmax(280px, 1.2fr) auto;
        gap: 12px;
        align-items: center;
        padding: 12px;
        border-radius: 14px;
        border: 1px solid rgba(148, 163, 184, 0.2);
        background: rgba(8, 12, 24, 0.92);
        backdrop-filter: blur(6px);
      }
      .command-left {
        display: grid;
        gap: 4px;
      }
      .command-title {
        margin: 0;
        font-size: 1.05rem;
        font-weight: 700;
      }
      .command-progress {
        font-size: 0.82rem;
        color: var(--muted);
      }
      .command-badge {
        justify-self: start;
        display: inline-flex;
        align-items: center;
        border-radius: 999px;
        border: 1px solid rgba(34, 197, 94, 0.45);
        background: rgba(20, 83, 45, 0.34);
        color: #dcfce7;
        font-size: 0.75rem;
        padding: 3px 9px;
      }
      .ui-icon {
        width: 14px;
        height: 14px;
        object-fit: contain;
        flex: 0 0 auto;
        opacity: 0.92;
      }
      .ui-icon-btn {
        display: inline-flex;
        align-items: center;
        gap: 7px;
      }
      .ui-label {
        line-height: 1.1;
      }
      .command-search-wrap {
        position: relative;
        min-width: 0;
      }
      .command-search-icon {
        position: absolute;
        left: 11px;
        top: 50%;
        transform: translateY(-50%);
        width: 15px;
        height: 15px;
        opacity: 0.86;
        pointer-events: none;
      }
      .command-search {
        width: 100%;
        min-height: 38px;
        border-radius: 10px;
        border: 1px solid rgba(148, 163, 184, 0.24);
        background: rgba(15, 23, 42, 0.58);
        color: var(--text);
        padding: 8px 12px;
        font-size: 0.9rem;
      }
      .command-search.command-search-has-icon {
        padding-left: 34px;
      }
      .command-search::placeholder {
        color: rgba(203, 213, 245, 0.65);
      }
      .command-templates {
        display: flex;
        align-items: center;
        gap: 8px;
        flex-wrap: wrap;
      }
      .command-actions {
        display: flex;
        align-items: center;
        gap: 8px;
        flex-wrap: wrap;
        justify-content: flex-end;
      }
      .command-btn {
        border: 1px solid rgba(148, 163, 184, 0.24);
        background: rgba(15, 23, 42, 0.62);
        color: var(--text);
        border-radius: 10px;
        padding: 6px 10px;
        font-size: 0.82rem;
        cursor: pointer;
        white-space: nowrap;
      }
      .command-btn:hover {
        border-color: rgba(56, 189, 248, 0.6);
      }
      .command-btn.is-active {
        border-color: rgba(34, 197, 94, 0.68);
        box-shadow: 0 0 0 1px rgba(34, 197, 94, 0.2) inset;
      }
      .command-btn:disabled {
        opacity: 0.55;
        cursor: not-allowed;
      }
      .template-segment {
        display: inline-flex;
        align-items: center;
        gap: 6px;
        position: relative;
        min-width: 0;
      }
      .template-help-wrap {
        position: relative;
      }
      .template-help-trigger {
        border: 1px solid rgba(34, 197, 94, 0.55);
        background: rgba(20, 83, 45, 0.28);
        color: var(--template-help-green);
        border-radius: 999px;
        padding: 6px 12px;
        font-size: 0.84rem;
        font-weight: 700;
        cursor: pointer;
        text-decoration: underline;
        text-underline-offset: 2px;
        display: inline-flex;
        align-items: center;
        gap: 6px;
      }
      .template-help-trigger.is-open {
        box-shadow: 0 0 0 1px rgba(34, 197, 94, 0.32), 0 0 12px rgba(34, 197, 94, 0.2);
      }
      .template-help-popover {
        position: absolute;
        top: calc(100% + 8px);
        left: 0;
        width: min(320px, 70vw);
        border-radius: 12px;
        border: 1px solid rgba(34, 197, 94, 0.45);
        background: rgba(8, 12, 24, 0.97);
        box-shadow: var(--submenu-shadow);
        padding: 10px 12px;
        display: grid;
        gap: 6px;
        z-index: 7;
      }
      .template-help-popover strong {
        font-size: 0.86rem;
        color: #dcfce7;
      }
      .template-help-popover p {
        margin: 0;
        font-size: 0.78rem;
        color: var(--muted);
      }
      .template-btn {
        background: rgba(10, 16, 31, 0.7);
      }
      .template-more-wrap {
        position: relative;
      }
      .template-more-menu {
        position: absolute;
        top: calc(100% + 6px);
        right: 0;
        min-width: 210px;
        display: grid;
        gap: 4px;
        padding: 8px;
        border-radius: 10px;
        border: 1px solid rgba(148, 163, 184, 0.3);
        background: rgba(8, 12, 24, 0.98);
        box-shadow: var(--submenu-shadow);
        z-index: 7;
      }
      .template-more-item {
        text-align: left;
        border: 1px solid rgba(148, 163, 184, 0.18);
        background: rgba(15, 23, 42, 0.62);
        color: var(--text);
        border-radius: 8px;
        padding: 6px 9px;
        font-size: 0.82rem;
        cursor: pointer;
        display: inline-flex;
        align-items: center;
      }
      .template-more-item.is-active {
        border-color: rgba(34, 197, 94, 0.62);
        background: rgba(20, 83, 45, 0.28);
      }
      .more-arrow {
        margin-left: 2px;
        color: var(--muted);
      }
      .undo-icon-wrap .ui-icon {
        transform: rotate(180deg);
      }
      .planner-filter-drawer {
        display: none;
      }
      .planner-filter-drawer.is-open {
        display: block;
      }
      .strategy-toolbar {
        display: grid;
        gap: 10px;
        padding: 12px;
        border-radius: 14px;
        border: 1px solid rgba(148, 163, 184, 0.25);
        background: rgba(9, 12, 20, 0.45);
      }
      .strategy-toolbar-label {
        font-size: 0.85rem;
        color: var(--muted);
        font-weight: 600;
        letter-spacing: 0.04em;
        text-transform: uppercase;
      }
      .strategy-toolbar-list {
        display: flex;
        gap: 8px;
        overflow-x: auto;
        padding-bottom: 2px;
      }
      .strategy-pill {
        border: 1px solid rgba(148, 163, 184, 0.3);
        background: rgba(15, 23, 42, 0.6);
        color: var(--text);
        border-radius: 999px;
        padding: 6px 12px;
        display: inline-flex;
        align-items: center;
        gap: 8px;
        cursor: pointer;
        white-space: nowrap;
        font-size: 0.85rem;
      }
      .strategy-pill:hover {
        border-color: rgba(56, 189, 248, 0.7);
      }
      .strategy-pill.is-active {
        border-color: rgba(34, 197, 94, 0.8);
        box-shadow:
          0 0 0 1px rgba(34, 197, 94, 0.25) inset,
          0 0 12px rgba(34, 197, 94, 0.28);
        color: #d1fae5;
      }
      .strategy-pill-icon {
        display: inline-flex;
        width: 16px;
        justify-content: center;
      }
      .planner-filters {
        background: rgba(9, 12, 20, 0.62);
        border: 1px solid rgba(148, 163, 184, 0.2);
        border-radius: 16px;
        padding: 16px;
        display: grid;
        gap: 14px;
        box-shadow: 0 0 0 1px rgba(9, 12, 20, 0.55) inset;
      }
      .planner-filters.is-disabled {
        opacity: 0.7;
      }
      .filters-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 12px;
      }
      .filters-header h3 {
        margin: 0;
        font-size: 1.1rem;
      }
      .filter-clear {
        border: 1px solid rgba(148, 163, 184, 0.35);
        background: rgba(15, 23, 42, 0.6);
        color: var(--text);
        border-radius: 10px;
        padding: 6px 12px;
        cursor: pointer;
        font-weight: 600;
      }
      .filter-clear:disabled {
        opacity: 0.5;
        cursor: not-allowed;
      }
      .filters-grid {
        display: grid;
        gap: 14px;
      }
      .drawer-columns {
        grid-template-columns: repeat(2, minmax(0, 1fr));
        align-items: start;
      }
      .active-filter-row {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
      }
      .active-filter-chip {
        display: inline-flex;
        align-items: center;
        border-radius: 999px;
        border: 1px solid rgba(34, 197, 94, 0.45);
        background: rgba(20, 83, 45, 0.28);
        color: #dcfce7;
        font-size: 0.75rem;
        padding: 3px 8px;
      }
      .chip-grid-limited {
        max-height: 92px;
        overflow: hidden;
        align-content: flex-start;
      }
      .show-more-button {
        justify-self: start;
        border: 1px solid rgba(148, 163, 184, 0.26);
        background: rgba(15, 23, 42, 0.58);
        color: var(--muted);
        border-radius: 8px;
        padding: 4px 8px;
        font-size: 0.76rem;
        cursor: pointer;
      }
      .filter-block {
        display: grid;
        gap: 8px;
      }
      .metrics-block {
        gap: 10px;
      }
      .metrics-toggle {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 12px;
        width: 100%;
        background: rgba(9, 12, 20, 0.45);
        border: 1px solid rgba(148, 163, 184, 0.25);
        color: var(--text);
        border-radius: 12px;
        padding: 8px 12px;
        font-weight: 600;
        cursor: pointer;
      }
      .metrics-toggle-icon {
        font-size: 0.8rem;
        color: var(--muted);
        text-transform: uppercase;
        letter-spacing: 0.08em;
      }
      .filter-title {
        font-weight: 600;
        color: var(--muted);
        font-size: 0.95rem;
      }
      .filter-title.with-icon {
        display: inline-flex;
        align-items: center;
        gap: 6px;
      }
      .filter-title.with-icon .ui-icon {
        width: 13px;
        height: 13px;
        opacity: 0.82;
      }
      .filter-chips {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
      }
      .chip-button {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        border: 1px solid rgba(148, 163, 184, 0.25);
        background: rgba(9, 12, 20, 0.45);
        color: var(--text);
        border-radius: 999px;
        padding: 6px 12px;
        font-size: 0.85rem;
        cursor: pointer;
        transition: border-color 0.2s ease, background 0.2s ease;
      }
      .chip-button:hover {
        border-color: rgba(56, 189, 248, 0.8);
      }
      .chip-button.is-active {
        border: 1px solid var(--chip-color, #38bdf8);
        background: rgba(12, 18, 30, 0.6);
        box-shadow:
          0 0 0 1px rgba(12, 18, 30, 0.45) inset,
          0 0 10px var(--chip-color, #38bdf8);
      }
      .chip-button.is-disabled {
        cursor: not-allowed;
        opacity: 0.6;
      }
      .chip-dot {
        width: 10px;
        height: 10px;
        border-radius: 999px;
        display: inline-block;
      }
      .filter-empty {
        color: var(--muted);
        font-size: 0.85rem;
      }
      .filter-numbers {
        display: grid;
        gap: 8px;
      }
      .filter-numbers label {
        font-size: 0.85rem;
        color: var(--muted);
      }
      .numeric-range {
        display: grid;
        grid-template-columns: 1fr auto 1fr;
        align-items: center;
        gap: 10px;
      }
      .numeric-range input {
        width: 100%;
        min-width: 110px;
        padding: 8px 10px;
        border-radius: 8px;
        border: 1px solid rgba(148, 163, 184, 0.35);
        background: rgba(15, 23, 42, 0.6);
        color: var(--text);
        font-size: 0.9rem;
        min-height: 36px;
      }
      .numeric-range input:disabled {
        opacity: 0.6;
      }
      .range-sep {
        color: var(--muted);
        font-size: 0.85rem;
      }
      .filter-note {
        font-size: 0.85rem;
        color: var(--muted);
      }
      .selection-actions {
        display: flex;
        align-items: center;
        gap: 10px;
        flex-wrap: wrap;
        padding: 10px 12px;
        border-radius: 12px;
        background: rgba(15, 23, 42, 0.45);
        border: 1px solid rgba(148, 163, 184, 0.25);
      }
      .group-status {
        font-size: 0.9rem;
        color: var(--muted);
      }
      .selection-warning {
        font-size: 0.85rem;
        color: #fbbf24;
        padding: 8px 12px;
        border-radius: 10px;
        border: 1px solid rgba(251, 191, 36, 0.4);
        background: rgba(120, 53, 15, 0.15);
      }
      .group-btn {
        border: 1px solid rgba(34, 197, 94, 0.6);
        background: rgba(34, 197, 94, 0.2);
        color: var(--text);
        border-radius: 10px;
        padding: 6px 12px;
        font-weight: 600;
        cursor: pointer;
      }
      .group-btn.ghost {
        border-color: rgba(148, 163, 184, 0.35);
        background: rgba(15, 23, 42, 0.5);
      }
      .group-btn:disabled {
        opacity: 0.5;
        cursor: not-allowed;
      }
      .itinerary-list {
        display: flex;
        flex-direction: column;
        gap: 12px;
      }
      .itinerary-row {
        display: block;
        padding: 10px 12px;
        border-radius: 14px;
        background: var(--card);
        border: 1px solid rgba(148, 163, 184, 0.2);
        cursor: grab;
        transition: transform 0.2s ease, border-color 0.2s ease, background 0.2s ease;
        position: relative;
        z-index: 0;
      }
      .itinerary-row.is-highlighted {
        border-color: var(--highlight-color, #38bdf8);
        box-shadow:
          0 0 0 1px rgba(9, 12, 20, 0.6) inset,
          0 0 14px var(--highlight-color, #38bdf8);
      }
      .itinerary-row.is-selected {
        border-color: rgba(34, 197, 94, 0.6);
        box-shadow: 0 0 0 1px rgba(34, 197, 94, 0.25) inset;
      }
      .itinerary-row > * {
        position: relative;
        z-index: 1;
      }
      .itinerary-row.is-dragging {
        background: rgba(34, 197, 94, 0.1);
        border-color: rgba(34, 197, 94, 0.5);
        transform: scale(1.005);
        cursor: grabbing;
        transition: none;
      }
      .itinerary-row:active {
        cursor: grabbing;
      }
      .itinerary-grab-rail {
        position: absolute;
        right: 8px;
        left: auto;
        top: 8px;
        bottom: 8px;
        width: 9px;
        border-radius: 999px;
        opacity: 0.2;
        background:
          linear-gradient(180deg, rgba(148, 163, 184, 0.48), rgba(148, 163, 184, 0.16)),
          repeating-linear-gradient(
            180deg,
            rgba(255, 255, 255, 0.32) 0,
            rgba(255, 255, 255, 0.32) 2px,
            rgba(255, 255, 255, 0.05) 2px,
            rgba(255, 255, 255, 0.05) 6px
          );
        box-shadow: inset 0 0 0 1px rgba(148, 163, 184, 0.24);
        pointer-events: none;
        transition: opacity 0.2s ease, box-shadow 0.2s ease;
      }
      .itinerary-row:hover .itinerary-grab-rail {
        opacity: 0.74;
        box-shadow:
          inset 0 0 0 1px rgba(148, 163, 184, 0.42),
          0 0 8px rgba(56, 189, 248, 0.22);
      }
      .itinerary-row:active .itinerary-grab-rail,
      .itinerary-row.is-dragging .itinerary-grab-rail {
        opacity: 0.94;
      }
      /* Photo banner behind each peak list item */
      .itinerary-photo-banner {
        position: relative;
        width: 100%;
        background-size: cover;
        background-position: center 30%;
        border-radius: 12px;
        padding: 8px 42px 8px 12px;
        min-height: 76px;
        display: grid;
        align-content: center;
        gap: 6px;
        color: #ffffff;
        overflow: hidden;
      }
      .itinerary-photo-banner.is-loading {
        background-color: rgba(15, 23, 42, 0.7);
      }
      .itinerary-photo-loading {
        position: absolute;
        inset: 0;
        display: grid;
        place-items: center;
        pointer-events: none;
        z-index: 2;
      }
      .itinerary-photo-spinner {
        width: 26px;
        height: 26px;
        border-radius: 999px;
        border: 3px solid rgba(34, 197, 94, 0.22);
        border-top-color: #22c55e;
        border-right-color: rgba(74, 222, 128, 0.85);
        animation: plannerPhotoSpin 0.9s linear infinite;
      }
      @keyframes plannerPhotoSpin {
        from {
          transform: rotate(0deg);
        }
        to {
          transform: rotate(360deg);
        }
      }
      /* Dark gradient overlay to improve contrast on light images */
      .itinerary-photo-banner::before {
        content: '';
        position: absolute;
        inset: 0;
        border-radius: inherit;
        background: linear-gradient(180deg, rgba(0, 0, 0, 0.25) 0%, rgba(3, 6, 17, 0.75) 100%);
        pointer-events: none;
        z-index: 0;
      }
      /* Ensure all content sits above the gradient overlay */
      .itinerary-photo-banner > * {
        position: relative;
        z-index: 1;
      }
      .itinerary-banner-top {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 10px;
      }
      .itinerary-index {
        width: 30px;
        height: 30px;
        border-radius: 999px;
        background: linear-gradient(145deg, #1e293b, #334155);
        color: #f8fafc;
        font-weight: 700;
        font-size: 0.88rem;
        display: grid;
        place-items: center;
        box-shadow:
          inset 0 0 0 1px rgba(148, 163, 184, 0.3),
          0 4px 12px rgba(15, 23, 42, 0.62);
      }
      .itinerary-details {
        display: grid;
        gap: 4px;
      }
      .itinerary-name-row {
        display: flex;
        align-items: center;
        gap: 8px;
      }
      .row-checkbox {
        width: 18px;
        height: 18px;
        margin: 0;
        appearance: none;
        border-radius: 999px;
        border: 1px solid rgba(148, 163, 184, 0.72);
        background: rgba(15, 23, 42, 0.84);
        cursor: pointer;
        display: inline-block;
        transition: border-color 0.2s ease, background 0.2s ease, box-shadow 0.2s ease;
      }
      .row-checkbox:hover {
        border-color: rgba(56, 189, 248, 0.75);
      }
      .row-checkbox:checked {
        border-color: rgba(74, 222, 128, 0.9);
        background:
          radial-gradient(circle at center, rgba(220, 252, 231, 0.95) 0 30%, rgba(74, 222, 128, 0.9) 32% 48%, rgba(6, 95, 70, 0.95) 50% 100%);
        box-shadow: 0 0 0 1px rgba(34, 197, 94, 0.32), 0 0 10px rgba(34, 197, 94, 0.22);
      }
      .row-checkbox:focus-visible {
        outline: none;
        box-shadow: 0 0 0 2px rgba(56, 189, 248, 0.7), 0 0 0 4px rgba(2, 6, 23, 0.8);
      }
      .itinerary-name {
        font-weight: 600;
        font-size: 1rem;
      }
      .itinerary-peak-link {
        color: var(--primary-strong);
        text-decoration-color: rgba(74, 222, 128, 0.8);
        text-underline-offset: 2px;
        text-shadow: 0 1px 3px rgba(2, 6, 23, 0.8);
      }
      .itinerary-peak-link:hover,
      .itinerary-peak-link:focus-visible {
        color: #bbf7d0;
      }
      .itinerary-peak-link:focus-visible {
        outline: 2px solid rgba(74, 222, 128, 0.8);
        outline-offset: 2px;
        border-radius: 4px;
      }
      .itinerary-meta {
        font-size: 0.85rem;
        color: var(--muted);
      }
      /* Make the peak name and metrics pure white on the image */
      .itinerary-photo-banner .itinerary-name,
      .itinerary-photo-banner .itinerary-meta {
        color: #ffffff;
      }
      .itinerary-photo-banner .itinerary-name.itinerary-peak-link {
        color: var(--primary-strong);
      }
      .itinerary-photo-banner .itinerary-name.itinerary-peak-link:hover,
      .itinerary-photo-banner .itinerary-name.itinerary-peak-link:focus-visible {
        color: #bbf7d0;
      }
      .risk-tags {
        display: flex;
        flex-wrap: wrap;
        gap: 6px;
      }
      .risk-tag {
        display: inline-flex;
        align-items: center;
        gap: 6px;
        border-radius: 999px;
        padding: 2px 8px;
        border: 1px solid rgba(148, 163, 184, 0.2);
        font-size: 0.75rem;
        color: var(--muted);
      }
      .risk-tag-dot {
        width: 8px;
        height: 8px;
        border-radius: 999px;
        display: inline-block;
      }
      /* Risk tags overlay: white text, semi-transparent background, subtle border */
      .itinerary-photo-banner .risk-tag {
        border: 1px solid rgba(255, 255, 255, 0.4);
        background: rgba(0, 0, 0, 0.35);
        color: #ffffff;
      }
      .itinerary-photo-banner .risk-tag-dot {
        background: currentColor;
      }
      .itinerary-range {
        max-width: 62%;
        font-size: 0.82rem;
        font-weight: 600;
        color: #e2e8f0;
        text-shadow: 0 1px 3px rgba(2, 6, 23, 0.72);
        text-align: right;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }
      .itinerary-group {
        border: 1px solid transparent;
        border-radius: 14px;
        background:
          linear-gradient(rgba(15, 23, 42, 0.65), rgba(15, 23, 42, 0.65)) padding-box,
          var(--group-border, rgba(148, 163, 184, 0.25)) border-box;
        padding: 12px;
        display: grid;
        gap: 12px;
      }
      .itinerary-group.is-dragging {
        border-color: rgba(56, 189, 248, 0.7);
        box-shadow: 0 10px 24px rgba(56, 189, 248, 0.2);
        transition: none;
      }
      .group-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 12px;
      }
      .group-title {
        display: grid;
        gap: 2px;
      }
      .group-badge {
        display: inline-flex;
        align-items: center;
        gap: 6px;
        font-size: 0.75rem;
        text-transform: uppercase;
        letter-spacing: 0.08em;
        color: var(--group-accent, var(--muted));
      }
      .group-meta {
        font-size: 0.8rem;
        color: var(--muted);
      }
      .group-list {
        display: grid;
        gap: 10px;
      }
      .group-list.is-disabled {
        opacity: 0.85;
        pointer-events: none;
      }
      .group-empty {
        font-size: 0.85rem;
        color: var(--muted);
        border: 1px dashed rgba(148, 163, 184, 0.3);
        border-radius: 12px;
        padding: 10px 12px;
      }
      .group-handle {
        font-size: 0.8rem;
        text-transform: uppercase;
        letter-spacing: 0.1em;
        color: var(--muted);
      }
      .auto-group {
        display: grid;
        gap: 8px;
      }
      .auto-group-toggles {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
        align-items: center;
      }
      .toggle-button {
        border: 1px solid rgba(148, 163, 184, 0.3);
        background: rgba(10, 14, 24, 0.5);
        color: var(--text);
        border-radius: 999px;
        padding: 6px 14px;
        font-size: 0.85rem;
        cursor: pointer;
        transition: border-color 0.2s ease, box-shadow 0.2s ease;
      }
      .toggle-button.is-active {
        border-color: rgba(34, 197, 94, 0.85);
        box-shadow:
          0 0 0 1px rgba(10, 14, 24, 0.45) inset,
          0 0 14px rgba(34, 197, 94, 0.35);
        color: #d1fae5;
      }
      .itinerary-empty {
        border: 1px dashed rgba(148, 163, 184, 0.3);
        border-radius: 14px;
        padding: 20px;
        text-align: center;
        color: var(--muted);
        background: rgba(15, 23, 42, 0.4);
      }
      .planner-status {
        color: var(--muted);
        font-size: 0.95rem;
      }
      .planner-context-shell {
        position: fixed;
        inset: 0;
        z-index: 9999;
        pointer-events: none;
      }
      .context-menu {
        position: fixed;
        z-index: 9999;
        display: grid;
        gap: 6px;
        background: var(--menu-surface);
        border: 1px solid var(--menu-border);
        border-radius: 12px;
        padding: 8px;
        min-width: 180px;
        max-height: min(74vh, 620px);
        overflow: auto;
        box-shadow: var(--submenu-shadow);
        pointer-events: auto;
      }
      .context-menu .context-menu-item {
        border: 1px solid rgba(148, 163, 184, 0.25);
        background: rgba(9, 12, 20, 0.6);
        color: var(--text);
        border-radius: 8px;
        padding: 6px 10px;
        text-align: left;
        cursor: pointer;
        font-size: 0.85rem;
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 10px;
      }
      .menu-item-content,
      .submenu-item-content {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        min-width: 0;
      }
      .submenu-item-content .ui-label,
      .menu-item-content .ui-label {
        overflow: hidden;
        text-overflow: ellipsis;
      }
      .context-menu .context-menu-item.has-submenu.is-open {
        border-color: rgba(56, 189, 248, 0.55);
      }
      .context-menu .context-menu-item.is-active {
        border-color: rgba(34, 197, 94, 0.62);
        background: rgba(20, 83, 45, 0.28);
      }
      .context-menu .context-menu-item:disabled {
        opacity: 0.5;
        cursor: not-allowed;
      }
      .context-menu-heading {
        font-size: 0.73rem;
        color: var(--muted);
        text-transform: uppercase;
        letter-spacing: 0.08em;
        padding: 2px 4px 0;
        display: inline-flex;
        align-items: center;
        gap: 6px;
      }
      .context-menu-divider {
        height: 1px;
        background: rgba(148, 163, 184, 0.28);
        margin: 2px 0;
      }
      .context-submenu {
        min-width: 230px;
      }
      .context-arrow {
        color: var(--muted);
      }
      .context-check {
        color: #86efac;
        font-weight: 700;
      }
      .strategy-modal-backdrop {
        position: fixed;
        inset: 0;
        background: rgba(2, 6, 23, 0.72);
        backdrop-filter: blur(2px);
        display: grid;
        place-items: center;
        z-index: 9800;
      }
      .strategy-modal {
        width: min(460px, calc(100vw - 36px));
        border-radius: 16px;
        border: 1px solid rgba(148, 163, 184, 0.3);
        background: linear-gradient(145deg, rgba(9, 12, 20, 0.96), rgba(15, 23, 42, 0.96));
        box-shadow: 0 20px 40px rgba(5, 8, 20, 0.55);
        padding: 18px;
        display: grid;
        gap: 12px;
      }
      .strategy-modal h3 {
        margin: 0;
        font-size: 1.1rem;
      }
      .strategy-modal p {
        margin: 0;
        color: var(--muted);
        font-size: 0.92rem;
      }
      .strategy-modal-actions {
        display: flex;
        justify-content: flex-end;
        gap: 10px;
      }
      .planner-status strong {
        color: var(--text);
      }
      @media (max-width: 980px) {
        .planner-command-bar {
          grid-template-columns: 1fr 1fr;
          gap: 10px;
        }
        .command-left {
          grid-column: 1 / -1;
        }
        .command-search-wrap {
          grid-column: 1 / -1;
        }
        .command-templates {
          grid-column: 1 / 2;
        }
        .command-actions {
          grid-column: 2 / 3;
          justify-content: flex-start;
        }
        .command-actions,
        .command-templates {
          justify-content: flex-start;
        }
        .drawer-columns {
          grid-template-columns: 1fr;
        }
      }
      @media (max-width: 640px) {
        .planner-command-bar {
          grid-template-columns: 1fr;
        }
        .filters-header {
          flex-direction: column;
          align-items: flex-start;
        }
        .numeric-range {
          grid-template-columns: 1fr;
        }
        .itinerary-row {
          padding: 8px;
        }
        .itinerary-photo-banner {
          min-height: 64px;
          padding: 8px 36px 8px 10px;
          gap: 5px;
        }
        .itinerary-index {
          width: 28px;
          height: 28px;
          font-size: 0.8rem;
        }
        .itinerary-range {
          font-size: 0.75rem;
          max-width: 58%;
        }
        .itinerary-meta {
          font-size: 0.8rem;
        }
        .risk-tag {
          font-size: 0.68rem;
          padding: 1px 7px;
        }
        .command-search {
          min-height: 36px;
          font-size: 0.85rem;
        }
        .command-btn {
          padding: 6px 9px;
          font-size: 0.76rem;
        }
        .template-segment,
        .command-actions,
        .command-templates {
          width: 100%;
          flex-wrap: wrap;
        }
      }
    </style>
          <meta property="og:image" content="https://nh48.info/photos/og/tools/nh48-planner.jpg?v=92acf031">
        <meta property="og:image:alt" content="Owl&#x27;s Head fall foliage banner for the NH48 Peak Planning Tool.">
        <meta name="twitter:image" content="https://nh48.info/photos/og/tools/nh48-planner.jpg?v=92acf031">
        <meta name="twitter:image:alt" content="Owl&#x27;s Head fall foliage banner for the NH48 Peak Planning Tool.">
        <link rel="canonical" href="https://nh48.info/nh48-planner.html">
    <meta property="og:url" content="https://nh48.info/nh48-planner.html">
    <meta name="twitter:url" content="https://nh48.info/nh48-planner.html">
</head>
  <body data-route="nh48-planner" data-page="nh48-planner">
    <div id="nav-placeholder"></div>
    <script>
      document.addEventListener('DOMContentLoaded', () => {
        const navPlaceholder = document.getElementById('nav-placeholder');
        const footerPlaceholder = document.getElementById('footer-placeholder');
        const activeRoute = document.body.dataset.route || document.body.dataset.page;

        if (navPlaceholder) {
          fetch('/pages/nav.html')
            .then((r) => r.text())
            .then((html) => {
              navPlaceholder.innerHTML = html;
              const links = navPlaceholder.querySelectorAll('.site-nav-links a');
              links.forEach((link) => {
                const routes = (link.dataset.routes || link.dataset.route || '')
                  .split(',')
                  .map((value) => value.trim())
                  .filter(Boolean);

                if (routes.includes(activeRoute)) {
                  link.classList.add('active');
                  link.setAttribute('aria-current', 'page');
                }
              });
              if (window.NH48_I18N && window.NH48_I18N.refreshLangPicker) {
                window.NH48_I18N.refreshLangPicker();
              }
            })
            .catch((err) => console.error('Navigation failed to load', err));
        }

        if (footerPlaceholder) {
          fetch('/pages/footer.html')
            .then((r) => r.text())
            .then((html) => {
              footerPlaceholder.innerHTML = html;
            })
            .catch((err) => console.error('Footer failed to load', err));
        }
      });
    </script>

    <main class="wrap">
      <section class="section" id="peak-planner">
        <nav class="planner-breadcrumbs" aria-label="Breadcrumb">
          <a href="/">Home</a>
          <span aria-hidden="true">&gt;</span>
          <a href="/nh-4000-footers-info">NH48 Guide</a>
          <span aria-hidden="true">&gt;</span>
          <span class="crumb-current">Peak Planning Tool</span>
        </nav>
        <div
          class="section-banner"
          style="background-image: url('https://photos.nh48.info/cdn-cgi/image/format=webp,quality=85/owls-head/owls-head__001.jpg'); border: 1px solid rgba(148, 163, 184, 0.35);"
        >
          <h2><a href="#peak-planner">Peak Planning Tool</a></h2>
        </div>
        <p>
          Use this interactive planner to organize your NH48 hiking journey. The full list loads
          automatically and starts grouped by difficulty, so easier hikes like Tecumseh and Pierce
          rise to the top while the most demanding peaks sit at the end. Drag peaks to reorder,
          group day-trip classics from the filters, and use the highlighting controls to spot
          risks and route traits without hiding anything. All data comes from the live NH48
          manifest; confirm conditions and routes with official sources.
        </p>
        <div id="planner-root"></div>
      </section>
    </main>

    <div id="footer-placeholder"></div>

    <script type="module" src="/js/nh48-planner.js"></script>
  </body>
</html>

