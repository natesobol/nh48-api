<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Virtual Hike of NH’s 4,000‑Footers – NH48</title>
<meta name="description" content="Take a virtual hike across New Hampshire’s 4,000‑foot peaks.  Explore interactive 3D models, photos and route information without leaving home.">
<link rel="canonical" href="https://nh48.info/virtual_hike.html">
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebPage",
  "name": "Virtual Hike of NH’s 4,000‑Footers",
  "url": "https://nh48.info/virtual_hike.html",
  "description": "Interactive virtual hike across all 48 of New Hampshire’s 4,000‑foot mountains."
}
</script>
<link rel="icon" type="image/png" href="WMNF_Trails_API_logo.png">
<link href="https://cdnjs.cloudflare.com/ajax/libs/cesium/1.109.0/Widgets/widgets.min.css" rel="stylesheet">
<link rel="stylesheet" href="css/virtual_hike.css">
<link rel="stylesheet" href="/css/quick-browse-footer.css">
</head>
<body>
<div id="toolbar">
  <h2 id="trailName">Virtual Hike</h2>
  <button id="playBtn">Fly Trail</button>
  <button id="clearBtn">Clear Markers</button>
</div>
<div id="cesiumContainer"></div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/cesium/1.109.0/Cesium.min.js"></script>
<script>
// Helper to get query parameters
function getQueryParam(name) {
  const params = new URLSearchParams(window.location.search);
  return params.get(name);
}

// Main async function to initialize the virtual hike
async function init() {
  const trail = getQueryParam('trail');
  const decoded = trail ? decodeURIComponent(trail) : '';
  document.getElementById('trailName').textContent = decoded ? decoded + ' — Virtual Hike' : 'Virtual Hike';

  // Create the Cesium viewer
  const viewer = new Cesium.Viewer('cesiumContainer', {
    terrainProvider: Cesium.createWorldTerrain(),
    animation: false,
    timeline: false,
    sceneModePicker: false,
    baseLayerPicker: false,
    navigationHelpButton: false,
    geocoder: false,
    homeButton: false,
    infoBox: false,
    fullscreenButton: false,
    selectionIndicator: false
  });

  // Store user-added markers
  const userMarkers = [];

  // Add click handler to add markers
  const handler = new Cesium.ScreenSpaceEventHandler(viewer.scene.canvas);
  handler.setInputAction(function(click) {
    const cartesian = viewer.scene.pickPosition(click.position);
    if (Cesium.defined(cartesian)) {
      const marker = viewer.entities.add({
        position: cartesian,
        point: {
          pixelSize: 8,
          color: Cesium.Color.YELLOW,
          outlineColor: Cesium.Color.BLACK,
          outlineWidth: 1
        }
      });
      userMarkers.push(marker);
    }
  }, Cesium.ScreenSpaceEventType.LEFT_CLICK);

  // Clear button to remove all markers
  document.getElementById('clearBtn').addEventListener('click', function() {
    userMarkers.forEach(entity => viewer.entities.remove(entity));
    userMarkers.length = 0;
  });

  // Load the GeoJSON trail data from the bundled copy first, then fall back to mirrors
  const geoUrls = [
    'data/merged_trails.geojson',
    'https://cdn.jsdelivr.net/gh/natesobol/nh48-api@main/data/merged_trails.geojson',
    'https://raw.githubusercontent.com/natesobol/nh48-api/main/data/merged_trails.geojson',
    'https://unpkg.com/natesobol/nh48-api@main/data/merged_trails.geojson'
  ];
  let geoData;
  for (const url of geoUrls) {
    try {
      const res = await fetch(url, {cache: 'no-cache'});
      if (res.ok) {
        geoData = await res.json();
        break;
      }
    } catch {
      continue;
    }
  }
  if (!geoData) {
    alert('Failed to load trail data.');
    return;
  }

  // Filter features by name
  const features = geoData.features.filter(f => {
    const name = f.properties && f.properties.name;
    return name && name === decoded;
  });
  if (features.length === 0) {
    alert('Trail not found: ' + decoded);
    return;
  }

  // Create a GeoJsonDataSource for the selected trail
  const dataSource = await Cesium.GeoJsonDataSource.load(
    {type: 'FeatureCollection', features: features},
    {
      clampToGround: true,
      stroke: Cesium.Color.ORANGERED,
      strokeWidth: 4
    }
  );
  viewer.dataSources.add(dataSource);

  // Fly to the trail when the page loads
  viewer.flyTo(dataSource.entities, {duration: 3});

  // Play button: fly along the trail path
  document.getElementById('playBtn').addEventListener('click', function() {
    let positions;
    const entity = dataSource.entities.values[0];
    if (entity.polyline && entity.polyline.positions) {
      positions = entity.polyline.positions.getValue(Cesium.JulianDate.now());
    } else if (entity.polygon) {
      positions = entity.polygon.hierarchy.getValue(Cesium.JulianDate.now()).positions;
    }
    if (!positions || positions.length === 0) {
      alert('No positions found for this trail.');
      return;
    }
    // Create a set of sampled positions to fly through
    const total = positions.length;
    const flyPositions = [];
    for (let i = 0; i < total; i += Math.floor(total/100) || 1) {
      flyPositions.push(positions[i]);
    }
    let index = 0;
    function flyNext() {
      if (index >= flyPositions.length) return;
      viewer.camera.flyTo({
        destination: flyPositions[index],
        orientation: {
          heading: viewer.camera.heading,
          pitch: viewer.camera.pitch,
          roll: viewer.camera.roll
        },
        duration: 1.0,
        complete: function() {
          index++;
          flyNext();
        }
      });
    }
    flyNext();
  });
}

init();
</script>
<style data-nh48-quick-footer-style>
  .nh48-quick-footer {
    margin: 42px auto 34px;
    width: min(1100px, 94vw);
    background: linear-gradient(135deg, rgba(10, 10, 10, 0.9), rgba(12, 20, 24, 0.92));
    border: 1px solid rgba(255, 255, 255, 0.9);
    border-radius: 18px;
    box-shadow: 0 16px 48px rgba(0, 0, 0, 0.45);
    padding: 18px 18px 12px;
    color: #ffffff;
    backdrop-filter: blur(4px);
    display: flex;
    flex-direction: column;
    gap: 10px;
    height: min(420px, 80vh);
    max-height: 420px;
    overflow: hidden;
  }

  .nh48-quick-footer__header {
    text-align: center;
    max-width: 940px;
    margin: 0 auto 2px;
  }

  .nh48-quick-footer__controls {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    flex-wrap: wrap;
    padding: 8px 10px;
    margin: 2px auto 0;
    border-radius: 14px;
    border: 1px solid rgba(43, 216, 121, 0.4);
    background: rgba(34, 197, 94, 0.08);
    box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.08);
  }

  .nh48-quick-footer__sort-button {
    appearance: none;
    border: 1px solid rgba(255, 255, 255, 0.7);
    background: rgba(10, 10, 10, 0.4);
    color: #ffffff;
    border-radius: 12px;
    padding: 8px 14px;
    font-weight: 700;
    letter-spacing: 0.2px;
    cursor: pointer;
    transition: background 0.2s ease, border-color 0.2s ease, box-shadow 0.2s ease, transform 0.2s ease;
  }

  .nh48-quick-footer__sort-button:hover,
  .nh48-quick-footer__sort-button:focus-visible {
    outline: none;
    border-color: #2bd879;
    background: rgba(34, 197, 94, 0.16);
    box-shadow: 0 0 0 3px rgba(43, 216, 121, 0.2);
    transform: translateY(-1px);
  }

  .nh48-quick-footer__sort-button.is-active {
    background: linear-gradient(135deg, rgba(43, 216, 121, 0.35), rgba(34, 197, 94, 0.22));
    border-color: #2bd879;
    box-shadow: 0 0 0 3px rgba(43, 216, 121, 0.22);
  }

  .nh48-quick-footer__eyebrow {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 5px 10px;
    border-radius: 999px;
    border: 1px solid rgba(255, 255, 255, 0.8);
    background: rgba(34, 197, 94, 0.12);
    color: #bbf7d0;
    font-weight: 700;
    letter-spacing: 0.3px;
    text-transform: uppercase;
    font-size: 11px;
  }

  .nh48-quick-footer__header h2 {
    margin: 6px 0 2px;
    font-size: clamp(18px, 2.2vw, 23px);
    letter-spacing: 0.3px;
  }

  .nh48-quick-footer__header p {
    margin: 0 0 2px;
    color: #d7e7db;
    line-height: 1.35;
    font-size: 0.9rem;
  }

  .nh48-quick-footer__grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 14px;
    margin-top: 6px;
    padding: 6px 4px 8px;
    flex: 1 1 auto;
    overflow-y: auto;
    scrollbar-width: thin;
    scrollbar-color: rgba(43, 216, 121, 0.6) rgba(255, 255, 255, 0.08);
  }

  .nh48-quick-footer__grid::-webkit-scrollbar {
    width: 10px;
  }

  .nh48-quick-footer__grid::-webkit-scrollbar-track {
    background: rgba(255, 255, 255, 0.08);
    border-radius: 10px;
  }

  .nh48-quick-footer__grid::-webkit-scrollbar-thumb {
    background: linear-gradient(180deg, #2bd879, #0b9e4c);
    border-radius: 10px;
  }

  .nh48-quick-footer__group {
    border: 1px solid rgba(255, 255, 255, 0.22);
    border-radius: 12px;
    padding: 10px 12px;
    background: rgba(12, 18, 22, 0.65);
    box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.05);
  }

  .nh48-quick-footer__group h2 {
    margin: 0 0 6px;
    font-size: 15px;
    letter-spacing: 0.15px;
    color: #c5f2d0;
  }

  .nh48-quick-footer__list {
    list-style: none;
    padding: 0;
    margin: 0;
    display: grid;
    gap: 8px;
  }

  .nh48-quick-footer__link {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 9px 10px;
    min-height: 44px;
    text-align: center;
    border-radius: 10px;
    border: 1px solid #ffffff;
    color: #ffffff;
    text-decoration: none;
    background: rgba(34, 197, 94, 0.14);
    transition: border-color 0.2s ease, box-shadow 0.2s ease, background 0.2s ease, transform 0.2s ease;
    line-height: 1.35;
    white-space: normal;
  }

  .nh48-quick-footer__link:hover,
  .nh48-quick-footer__link:focus-visible {
    border-color: #2bd879;
    box-shadow: 0 0 0 3px rgba(43, 216, 121, 0.28);
    background: rgba(34, 197, 94, 0.2);
    transform: translateY(-1px);
    outline: none;
  }

  .nh48-quick-footer__meta {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    justify-content: space-between;
    gap: 12px;
    border-top: 1px solid rgba(255, 255, 255, 0.12);
    padding: 12px 4px 4px;
    font-size: 14px;
  }

  .nh48-quick-footer__meta-links {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    align-items: center;
  }

  .nh48-quick-footer__meta-links a {
    color: #c9f3d7;
    text-decoration: none;
    padding: 6px 10px;
    border-radius: 8px;
    border: 1px solid rgba(34, 197, 94, 0.3);
    background: rgba(34, 197, 94, 0.08);
    font-weight: 700;
    letter-spacing: 0.2px;
    transition: background 0.2s ease, border-color 0.2s ease, color 0.2s ease;
  }

  .nh48-quick-footer__meta-links a:hover,
  .nh48-quick-footer__meta-links a:focus-visible {
    color: #22c55e;
    border-color: rgba(34, 197, 94, 0.7);
    background: rgba(34, 197, 94, 0.14);
    outline: none;
  }

  .nh48-quick-footer__legal {
    color: #a8cbb7;
    font-weight: 600;
  }

  @media (max-width: 1180px) {
    .nh48-quick-footer__grid {
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    }
  }

  @media (max-width: 960px) {
    .nh48-quick-footer__grid {
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
    }
  }

  @media (max-width: 780px) {
    .nh48-quick-footer {
      padding: 18px 14px 12px;
      height: min(420px, 78vh);
    }
    .nh48-quick-footer__grid {
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
    }
  }

  @media (max-width: 600px) {
    .nh48-quick-footer__grid {
      grid-template-columns: 1fr;
    }
  }
</style>
<footer class="nh48-quick-footer" aria-labelledby="nh48-quick-footer-title" data-nh48-quick-footer>
  <div class="nh48-quick-footer__header">
    <div class="nh48-quick-footer__eyebrow">Quick Browse</div>
    <h2 id="nh48-quick-footer-title">Browse NH48 peaks of the White Mountains of New Hampshire</h2>
    <p>Jump directly into every New Hampshire 4,000-footer detail page to strengthen internal linking and keep crawlers flowing through the full NH48 set.</p>
  </div>
  <div class="nh48-quick-footer__grid" aria-label="NH48 quick browse footer links">
    <div class="nh48-quick-footer__group">
      <h2>Presidential Range</h2>
      <ul class="nh48-quick-footer__list">
        <li><a class="nh48-quick-footer__link" href="/peaks/mount-washington">Mount Washington</a></li>
        <li><a class="nh48-quick-footer__link" href="/peaks/mount-adams">Mount Adams</a></li>
        <li><a class="nh48-quick-footer__link" href="/peaks/mount-jefferson">Mount Jefferson</a></li>
        <li><a class="nh48-quick-footer__link" href="/peaks/mount-monroe">Mount Monroe</a></li>
        <li><a class="nh48-quick-footer__link" href="/peaks/mount-eisenhower">Mount Eisenhower</a></li>
        <li><a class="nh48-quick-footer__link" href="/peaks/mount-pierce">Mount Pierce</a></li>
        <li><a class="nh48-quick-footer__link" href="/peaks/mount-jackson">Mount Jackson</a></li>
        <li><a class="nh48-quick-footer__link" href="/peaks/mount-madison">Mount Madison</a></li>
        <li><a class="nh48-quick-footer__link" href="/peaks/mount-isolation">Mount Isolation</a></li>
      </ul>
    </div>
    <div class="nh48-quick-footer__group">
      <h2>Franconia Ridge</h2>
      <ul class="nh48-quick-footer__list">
        <li><a class="nh48-quick-footer__link" href="/peaks/mount-lafayette">Mount Lafayette</a></li>
        <li><a class="nh48-quick-footer__link" href="/peaks/mount-lincoln">Mount Lincoln</a></li>
        <li><a class="nh48-quick-footer__link" href="/peaks/mount-liberty">Mount Liberty</a></li>
        <li><a class="nh48-quick-footer__link" href="/peaks/mount-flume">Mount Flume</a></li>
        <li><a class="nh48-quick-footer__link" href="/peaks/mount-garfield">Mount Garfield</a></li>
      </ul>
    </div>
    <div class="nh48-quick-footer__group">
      <h2>Twin Range &amp; Bonds</h2>
      <ul class="nh48-quick-footer__list">
        <li><a class="nh48-quick-footer__link" href="/peaks/south-twin-mountain">South Twin Mountain</a></li>
        <li><a class="nh48-quick-footer__link" href="/peaks/north-twin-mountain">North Twin Mountain</a></li>
        <li><a class="nh48-quick-footer__link" href="/peaks/galehead-mountain">Galehead Mountain</a></li>
        <li><a class="nh48-quick-footer__link" href="/peaks/zealand-mountain">Zealand Mountain</a></li>
        <li><a class="nh48-quick-footer__link" href="/peaks/west-bond">West Bond</a></li>
        <li><a class="nh48-quick-footer__link" href="/peaks/mount-bond">Mount Bond</a></li>
        <li><a class="nh48-quick-footer__link" href="/peaks/bondcliff">Bondcliff</a></li>
        <li><a class="nh48-quick-footer__link" href="/peaks/owls-head">Owl's Head</a></li>
      </ul>
    </div>
    <div class="nh48-quick-footer__group">
      <h2>Carter-Moriah &amp; Wildcats</h2>
      <ul class="nh48-quick-footer__list">
        <li><a class="nh48-quick-footer__link" href="/peaks/carter-dome">Carter Dome</a></li>
        <li><a class="nh48-quick-footer__link" href="/peaks/south-carter-mountain">South Carter Mountain</a></li>
        <li><a class="nh48-quick-footer__link" href="/peaks/middle-carter-mountain">Middle Carter Mountain</a></li>
        <li><a class="nh48-quick-footer__link" href="/peaks/mount-moriah">Mount Moriah</a></li>
        <li><a class="nh48-quick-footer__link" href="/peaks/wildcat-mountain-a">Wildcat Mountain – A Peak</a></li>
        <li><a class="nh48-quick-footer__link" href="/peaks/wildcat-mountain-d">Wildcat Mountain – D Peak</a></li>
      </ul>
    </div>
    <div class="nh48-quick-footer__group">
      <h2>Kinsman Range</h2>
      <ul class="nh48-quick-footer__list">
        <li><a class="nh48-quick-footer__link" href="/peaks/north-kinsman-mountain">North Kinsman Mountain</a></li>
        <li><a class="nh48-quick-footer__link" href="/peaks/south-kinsman-mountain">South Kinsman Mountain</a></li>
        <li><a class="nh48-quick-footer__link" href="/peaks/cannon-mountain">Cannon Mountain</a></li>
      </ul>
    </div>
    <div class="nh48-quick-footer__group">
      <h2>Sandwich Range</h2>
      <ul class="nh48-quick-footer__list">
        <li><a class="nh48-quick-footer__link" href="/peaks/mount-passaconaway">Mount Passaconaway</a></li>
        <li><a class="nh48-quick-footer__link" href="/peaks/mount-whiteface">Mount Whiteface</a></li>
        <li><a class="nh48-quick-footer__link" href="/peaks/north-tripyramid">North Tripyramid</a></li>
        <li><a class="nh48-quick-footer__link" href="/peaks/middle-tripyramid">Middle Tripyramid</a></li>
        <li><a class="nh48-quick-footer__link" href="/peaks/mount-osceola">Mount Osceola</a></li>
        <li><a class="nh48-quick-footer__link" href="/peaks/mount-osceola-east">Mount Osceola – East Peak</a></li>
        <li><a class="nh48-quick-footer__link" href="/peaks/mount-tecumseh">Mount Tecumseh</a></li>
      </ul>
    </div>
    <div class="nh48-quick-footer__group">
      <h2>Pemigewasset &amp; Carrigain</h2>
      <ul class="nh48-quick-footer__list">
        <li><a class="nh48-quick-footer__link" href="/peaks/mount-carrigain">Mount Carrigain</a></li>
        <li><a class="nh48-quick-footer__link" href="/peaks/mount-hancock">Mount Hancock – North Peak</a></li>
        <li><a class="nh48-quick-footer__link" href="/peaks/mount-hancock-south">Mount Hancock – South Peak</a></li>
        <li><a class="nh48-quick-footer__link" href="/peaks/mount-hale">Mount Hale</a></li>
      </ul>
    </div>
    <div class="nh48-quick-footer__group">
      <h2>Northern Summits</h2>
      <ul class="nh48-quick-footer__list">
        <li><a class="nh48-quick-footer__link" href="/peaks/mount-cabot">Mount Cabot</a></li>
        <li><a class="nh48-quick-footer__link" href="/peaks/mount-waumbek">Mount Waumbek</a></li>
      </ul>
    </div>
    <div class="nh48-quick-footer__group">
      <h2>Western &amp; Outlying</h2>
      <ul class="nh48-quick-footer__list">
        <li><a class="nh48-quick-footer__link" href="/peaks/mount-moosilauke">Mount Moosilauke</a></li>
        <li><a class="nh48-quick-footer__link" href="/peaks/mount-willey">Mount Willey</a></li>
        <li><a class="nh48-quick-footer__link" href="/peaks/mount-field">Mount Field</a></li>
        <li><a class="nh48-quick-footer__link" href="/peaks/mount-tom">Mount Tom</a></li>
      </ul>
    </div>
  </div>
  <div class="nh48-quick-footer__meta">
    <div class="nh48-quick-footer__legal">© 2024 NH48 API · White Mountains data, trails &amp; photos</div>
    <div class="nh48-quick-footer__meta-links" aria-label="Footer navigation links">
      <a href="/catalog">Catalog</a>
      <a href="/trails">White Mountain Trails</a>
      <a href="/long-trails">Long Trails</a>
      <a href="https://nh48pics.com" target="_blank" rel="noopener">NH48 Pics</a>
      <a href="https://nh48.app" target="_blank" rel="noopener">Peak Bagger</a>
      <a href="https://www.instagram.com/nate_dumps_pics/" target="_blank" rel="noopener">Latest WMNF Photos</a>
    </div>
  </div>
</footer>

</body>
</html>
