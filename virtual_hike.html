<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Virtual Hike of NH’s 4,000‑Footers – NH48</title>
<meta name="description" content="Take a virtual hike across New Hampshire’s 4,000‑foot peaks.  Explore interactive 3D models, photos and route information without leaving home.">
<link rel="canonical" href="https://nh48.info/virtual_hike.html">
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebPage",
  "name": "Virtual Hike of NH’s 4,000‑Footers",
  "url": "https://nh48.info/virtual_hike.html",
  "description": "Interactive virtual hike across all 48 of New Hampshire’s 4,000‑foot mountains."
}
</script>
<link rel="icon" type="image/png" href="WMNF_Trails_API_logo.png">
<link href="https://cdnjs.cloudflare.com/ajax/libs/cesium/1.109.0/Widgets/widgets.min.css" rel="stylesheet">
<link rel="stylesheet" href="css/virtual_hike.css">
<link rel="stylesheet" href="/css/quick-browse-footer.css">
</head>
<body>
<div id="toolbar">
  <h2 id="trailName">Virtual Hike</h2>
  <button id="playBtn">Fly Trail</button>
  <button id="clearBtn">Clear Markers</button>
</div>
<div id="cesiumContainer"></div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/cesium/1.109.0/Cesium.min.js"></script>
<script>
// Helper to get query parameters
function getQueryParam(name) {
  const params = new URLSearchParams(window.location.search);
  return params.get(name);
}

// Main async function to initialize the virtual hike
async function init() {
  const trail = getQueryParam('trail');
  const decoded = trail ? decodeURIComponent(trail) : '';
  document.getElementById('trailName').textContent = decoded ? decoded + ' — Virtual Hike' : 'Virtual Hike';

  // Create the Cesium viewer
  const viewer = new Cesium.Viewer('cesiumContainer', {
    terrainProvider: Cesium.createWorldTerrain(),
    animation: false,
    timeline: false,
    sceneModePicker: false,
    baseLayerPicker: false,
    navigationHelpButton: false,
    geocoder: false,
    homeButton: false,
    infoBox: false,
    fullscreenButton: false,
    selectionIndicator: false
  });

  // Store user-added markers
  const userMarkers = [];

  // Add click handler to add markers
  const handler = new Cesium.ScreenSpaceEventHandler(viewer.scene.canvas);
  handler.setInputAction(function(click) {
    const cartesian = viewer.scene.pickPosition(click.position);
    if (Cesium.defined(cartesian)) {
      const marker = viewer.entities.add({
        position: cartesian,
        point: {
          pixelSize: 8,
          color: Cesium.Color.YELLOW,
          outlineColor: Cesium.Color.BLACK,
          outlineWidth: 1
        }
      });
      userMarkers.push(marker);
    }
  }, Cesium.ScreenSpaceEventType.LEFT_CLICK);

  // Clear button to remove all markers
  document.getElementById('clearBtn').addEventListener('click', function() {
    userMarkers.forEach(entity => viewer.entities.remove(entity));
    userMarkers.length = 0;
  });

  // Load the GeoJSON trail data from the bundled copy first, then fall back to mirrors
  const geoUrls = [
    'data/merged_trails.geojson',
    'https://cdn.jsdelivr.net/gh/natesobol/nh48-api@main/data/merged_trails.geojson',
    'https://raw.githubusercontent.com/natesobol/nh48-api/main/data/merged_trails.geojson',
    'https://unpkg.com/natesobol/nh48-api@main/data/merged_trails.geojson'
  ];
  let geoData;
  for (const url of geoUrls) {
    try {
      const res = await fetch(url, {cache: 'no-cache'});
      if (res.ok) {
        geoData = await res.json();
        break;
      }
    } catch {
      continue;
    }
  }
  if (!geoData) {
    alert('Failed to load trail data.');
    return;
  }

  // Filter features by name
  const features = geoData.features.filter(f => {
    const name = f.properties && f.properties.name;
    return name && name === decoded;
  });
  if (features.length === 0) {
    alert('Trail not found: ' + decoded);
    return;
  }

  // Create a GeoJsonDataSource for the selected trail
  const dataSource = await Cesium.GeoJsonDataSource.load(
    {type: 'FeatureCollection', features: features},
    {
      clampToGround: true,
      stroke: Cesium.Color.ORANGERED,
      strokeWidth: 4
    }
  );
  viewer.dataSources.add(dataSource);

  // Fly to the trail when the page loads
  viewer.flyTo(dataSource.entities, {duration: 3});

  // Play button: fly along the trail path
  document.getElementById('playBtn').addEventListener('click', function() {
    let positions;
    const entity = dataSource.entities.values[0];
    if (entity.polyline && entity.polyline.positions) {
      positions = entity.polyline.positions.getValue(Cesium.JulianDate.now());
    } else if (entity.polygon) {
      positions = entity.polygon.hierarchy.getValue(Cesium.JulianDate.now()).positions;
    }
    if (!positions || positions.length === 0) {
      alert('No positions found for this trail.');
      return;
    }
    // Create a set of sampled positions to fly through
    const total = positions.length;
    const flyPositions = [];
    for (let i = 0; i < total; i += Math.floor(total/100) || 1) {
      flyPositions.push(positions[i]);
    }
    let index = 0;
    function flyNext() {
      if (index >= flyPositions.length) return;
      viewer.camera.flyTo({
        destination: flyPositions[index],
        orientation: {
          heading: viewer.camera.heading,
          pitch: viewer.camera.pitch,
          roll: viewer.camera.roll
        },
        duration: 1.0,
        complete: function() {
          index++;
          flyNext();
        }
      });
    }
    flyNext();
  });
}

init();
</script>
<style data-nh48-quick-footer-style>
.nh48-quick-footer {
    --nh48-footer-grid-min: clamp(165px, 18vw, 230px);
    margin: 48px auto 18px;
    width: min(1240px, 100%);
    max-width: 1240px;
    background: linear-gradient(180deg, rgba(82, 57, 138, 0.94), rgba(20, 27, 48, 0.96));
    border: 1px solid rgba(255, 255, 255, 0.14);
    box-shadow: 0 22px 60px rgba(5, 8, 20, 0.45), inset 0 1px 0 rgba(255, 255, 255, 0.12);
    padding: clamp(18px, 2vw, 26px) clamp(14px, 3vw, 32px) clamp(20px, 2.5vw, 34px);
    color: #f6f7ff;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 16px;
    height: auto;
    max-height: none;
    overflow: visible;
    text-align: center;
    box-sizing: border-box;
    border-radius: 18px;
    position: relative;
    isolation: isolate;
  }

  .nh48-quick-footer__header {
    text-align: center;
    max-width: 1080px;
    margin: 0 auto 2px;
  }

  .nh48-quick-footer__controls {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    flex-wrap: wrap;
    padding: 9px 12px;
    margin: 2px auto 0;
    border-radius: 14px;
    border: 1px solid rgba(255, 255, 255, 0.24);
    background: linear-gradient(145deg, rgba(114, 85, 182, 0.5), rgba(36, 171, 112, 0.18));
    box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.18);
  }

  .nh48-quick-footer__sort-button {
    appearance: none;
    border: 1px solid rgba(255, 255, 255, 0.72);
    background: rgba(12, 19, 34, 0.6);
    color: #ffffff;
    border-radius: 12px;
    padding: 8px 13px;
    font-weight: 800;
    letter-spacing: 0.25px;
    cursor: pointer;
    transition: background 0.2s ease, border-color 0.2s ease, box-shadow 0.2s ease, transform 0.2s ease;
  }

  .nh48-quick-footer__sort-button:hover,
  .nh48-quick-footer__sort-button:focus-visible {
    outline: none;
    border-color: #2bd879;
    background: rgba(34, 197, 94, 0.2);
    box-shadow: 0 0 0 3px rgba(43, 216, 121, 0.24);
    transform: translateY(-1px);
  }

  .nh48-quick-footer__sort-button.is-active {
    background: linear-gradient(135deg, rgba(43, 216, 121, 0.4), rgba(34, 197, 94, 0.28));
    border-color: #2bd879;
    box-shadow: 0 0 0 3px rgba(43, 216, 121, 0.24);
  }

  .nh48-quick-footer__eyebrow {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 7px 12px;
    border-radius: 999px;
    border: 1px solid rgba(255, 255, 255, 0.75);
    background: rgba(88, 64, 146, 0.42);
    color: #e5f8ec;
    font-weight: 800;
    letter-spacing: 0.35px;
    text-transform: uppercase;
    font-size: 12px;
  }

  .nh48-quick-footer__header h2 {
    margin: 8px 0 4px;
    font-size: clamp(19px, 2.4vw, 24px);
    letter-spacing: 0.35px;
    color: #f6f7ff;
  }

  .nh48-quick-footer__header p {
    margin: 0 0 4px;
    color: #dbe5ff;
    line-height: 1.45;
    font-size: 0.95rem;
  }

  .nh48-quick-footer .nh48-quick-footer__grid {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    align-items: stretch;
    gap: 16px;
    margin-top: 10px;
    padding: 0;
    flex: 1 1 auto;
    overflow: visible;
    scrollbar-width: thin;
    scrollbar-color: rgba(43, 216, 121, 0.65) rgba(26, 26, 46, 0.9);
  }

  .nh48-quick-footer__grid::-webkit-scrollbar {
    width: 12px;
  }

  .nh48-quick-footer__grid::-webkit-scrollbar-track {
    background: rgba(26, 26, 46, 0.9);
    border-radius: 10px;
  }

  .nh48-quick-footer__grid::-webkit-scrollbar-thumb {
    background: linear-gradient(180deg, #2bd879, #0b9e4c);
    border-radius: 10px;
    border: 2px solid rgba(26, 26, 46, 0.9);
  }

  .nh48-quick-footer .nh48-quick-footer__group {
    border: 1px solid rgba(255, 255, 255, 0.26);
    border-radius: 14px;
    padding: 12px 14px;
    background: rgba(255, 255, 255, 0.06);
    box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.08), 0 6px 18px rgba(0, 0, 0, 0.28);
    min-width: var(--nh48-footer-grid-min);
    max-width: 260px;
    flex: 1 1 var(--nh48-footer-grid-min);
    text-align: center;
  }

  .nh48-quick-footer__group h2 {
    margin: 0 0 8px;
    font-size: 15px;
    letter-spacing: 0.2px;
    color: #f1f5ff;
  }

  .nh48-quick-footer__list {
    list-style: none;
    padding: 0;
    margin: 0;
    display: grid;
    gap: 7px;
  }

  .nh48-quick-footer__link {
    display: inline-flex;
    align-items: center;
    justify-content: flex-start;
    padding: 8px 10px;
    min-height: 40px;
    text-align: left;
    border-radius: 10px;
    border: 1px solid rgba(34, 197, 94, 0.7);
    color: #e9ffee;
    text-decoration: none;
    background: linear-gradient(180deg, rgba(34, 197, 94, 0.16), rgba(15, 110, 63, 0.3));
    transition: border-color 0.2s ease, box-shadow 0.2s ease, background 0.2s ease, transform 0.2s ease;
    line-height: 1.32;
    white-space: normal;
    width: 100%;
  }

  .nh48-quick-footer__link:hover,
  .nh48-quick-footer__link:focus-visible {
    border-color: #2bd879;
    box-shadow: 0 0 0 3px rgba(43, 216, 121, 0.28);
    background: linear-gradient(180deg, rgba(34, 197, 94, 0.24), rgba(11, 158, 76, 0.36));
    transform: translateY(-1px);
    outline: none;
  }

  .nh48-quick-footer__meta {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    justify-content: center;
    gap: 12px;
    border-top: 1px solid rgba(255, 255, 255, 0.18);
    padding: 14px 4px 2px;
    font-size: 14px;
    text-align: center;
  }

  .nh48-quick-footer__meta-links {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    align-items: center;
  }

  .nh48-quick-footer__meta-links a {
    color: #c9d6ff;
    text-decoration: none;
    padding: 6px 10px;
    border-radius: 9px;
    border: 1px solid transparent;
    transition: color 0.2s ease, background 0.2s ease, border-color 0.2s ease;
  }

  .nh48-quick-footer__meta-links a:hover,
  .nh48-quick-footer__meta-links a:focus-visible {
    color: #ffffff;
    background: rgba(34, 197, 94, 0.16);
    border-color: rgba(43, 216, 121, 0.32);
    outline: none;
  }

  .nh48-quick-footer__legal {
    color: #d2dcff;
  }

  @media (max-width: 768px) {
    .nh48-quick-footer {
      margin: 32px auto 16px;
      padding: 16px clamp(12px, 4vw, 18px) 22px;
    }

    .nh48-quick-footer .nh48-quick-footer__grid {
      gap: 12px;
    }

    .nh48-quick-footer__list {
      gap: 6px;
    }

    .nh48-quick-footer__link {
      min-height: 38px;
      padding: 8px 9px;
    }
  }

</style>
<footer class="nh48-quick-footer" aria-labelledby="nh48-quick-footer-title" data-nh48-quick-footer>
  <div class="nh48-quick-footer__header">
    <div class="nh48-quick-footer__eyebrow">Quick Browse</div>
    <h2 id="nh48-quick-footer-title">Browse NH48 peaks of the White Mountains of New Hampshire</h2>
    <p>Jump directly into every New Hampshire 4,000-footer detail page to strengthen internal linking and keep crawlers flowing through the full NH48 set.</p>
  </div>
  <div class="nh48-quick-footer__grid" aria-label="NH48 quick browse footer links">
    <div class="nh48-quick-footer__group">
      <h2>Presidential Range</h2>
      <ul class="nh48-quick-footer__list">
        <li><a class="nh48-quick-footer__link" href="/peaks/mount-washington">Mount Washington</a></li>
        <li><a class="nh48-quick-footer__link" href="/peaks/mount-adams">Mount Adams</a></li>
        <li><a class="nh48-quick-footer__link" href="/peaks/mount-jefferson">Mount Jefferson</a></li>
        <li><a class="nh48-quick-footer__link" href="/peaks/mount-monroe">Mount Monroe</a></li>
        <li><a class="nh48-quick-footer__link" href="/peaks/mount-eisenhower">Mount Eisenhower</a></li>
        <li><a class="nh48-quick-footer__link" href="/peaks/mount-pierce">Mount Pierce</a></li>
        <li><a class="nh48-quick-footer__link" href="/peaks/mount-jackson">Mount Jackson</a></li>
        <li><a class="nh48-quick-footer__link" href="/peaks/mount-madison">Mount Madison</a></li>
        <li><a class="nh48-quick-footer__link" href="/peaks/mount-isolation">Mount Isolation</a></li>
      </ul>
    </div>
    <div class="nh48-quick-footer__group">
      <h2>Franconia Ridge</h2>
      <ul class="nh48-quick-footer__list">
        <li><a class="nh48-quick-footer__link" href="/peaks/mount-lafayette">Mount Lafayette</a></li>
        <li><a class="nh48-quick-footer__link" href="/peaks/mount-lincoln">Mount Lincoln</a></li>
        <li><a class="nh48-quick-footer__link" href="/peaks/mount-liberty">Mount Liberty</a></li>
        <li><a class="nh48-quick-footer__link" href="/peaks/mount-flume">Mount Flume</a></li>
        <li><a class="nh48-quick-footer__link" href="/peaks/mount-garfield">Mount Garfield</a></li>
      </ul>
    </div>
    <div class="nh48-quick-footer__group">
      <h2>Twin Range &amp; Bonds</h2>
      <ul class="nh48-quick-footer__list">
        <li><a class="nh48-quick-footer__link" href="/peaks/south-twin-mountain">South Twin Mountain</a></li>
        <li><a class="nh48-quick-footer__link" href="/peaks/north-twin-mountain">North Twin Mountain</a></li>
        <li><a class="nh48-quick-footer__link" href="/peaks/galehead-mountain">Galehead Mountain</a></li>
        <li><a class="nh48-quick-footer__link" href="/peaks/zealand-mountain">Zealand Mountain</a></li>
        <li><a class="nh48-quick-footer__link" href="/peaks/west-bond">West Bond</a></li>
        <li><a class="nh48-quick-footer__link" href="/peaks/mount-bond">Mount Bond</a></li>
        <li><a class="nh48-quick-footer__link" href="/peaks/bondcliff">Bondcliff</a></li>
        <li><a class="nh48-quick-footer__link" href="/peaks/owls-head">Owl's Head</a></li>
      </ul>
    </div>
    <div class="nh48-quick-footer__group">
      <h2>Carter-Moriah &amp; Wildcats</h2>
      <ul class="nh48-quick-footer__list">
        <li><a class="nh48-quick-footer__link" href="/peaks/carter-dome">Carter Dome</a></li>
        <li><a class="nh48-quick-footer__link" href="/peaks/south-carter-mountain">South Carter Mountain</a></li>
        <li><a class="nh48-quick-footer__link" href="/peaks/middle-carter-mountain">Middle Carter Mountain</a></li>
        <li><a class="nh48-quick-footer__link" href="/peaks/mount-moriah">Mount Moriah</a></li>
        <li><a class="nh48-quick-footer__link" href="/peaks/wildcat-mountain-a">Wildcat Mountain – A Peak</a></li>
        <li><a class="nh48-quick-footer__link" href="/peaks/wildcat-mountain-d">Wildcat Mountain – D Peak</a></li>
      </ul>
    </div>
    <div class="nh48-quick-footer__group">
      <h2>Kinsman Range</h2>
      <ul class="nh48-quick-footer__list">
        <li><a class="nh48-quick-footer__link" href="/peaks/north-kinsman-mountain">North Kinsman Mountain</a></li>
        <li><a class="nh48-quick-footer__link" href="/peaks/south-kinsman-mountain">South Kinsman Mountain</a></li>
        <li><a class="nh48-quick-footer__link" href="/peaks/cannon-mountain">Cannon Mountain</a></li>
      </ul>
    </div>
    <div class="nh48-quick-footer__group">
      <h2>Sandwich Range</h2>
      <ul class="nh48-quick-footer__list">
        <li><a class="nh48-quick-footer__link" href="/peaks/mount-passaconaway">Mount Passaconaway</a></li>
        <li><a class="nh48-quick-footer__link" href="/peaks/mount-whiteface">Mount Whiteface</a></li>
        <li><a class="nh48-quick-footer__link" href="/peaks/north-tripyramid">North Tripyramid</a></li>
        <li><a class="nh48-quick-footer__link" href="/peaks/middle-tripyramid">Middle Tripyramid</a></li>
        <li><a class="nh48-quick-footer__link" href="/peaks/mount-osceola">Mount Osceola</a></li>
        <li><a class="nh48-quick-footer__link" href="/peaks/mount-osceola-east">Mount Osceola – East Peak</a></li>
        <li><a class="nh48-quick-footer__link" href="/peaks/mount-tecumseh">Mount Tecumseh</a></li>
      </ul>
    </div>
    <div class="nh48-quick-footer__group">
      <h2>Pemigewasset &amp; Carrigain</h2>
      <ul class="nh48-quick-footer__list">
        <li><a class="nh48-quick-footer__link" href="/peaks/mount-carrigain">Mount Carrigain</a></li>
        <li><a class="nh48-quick-footer__link" href="/peaks/mount-hancock">Mount Hancock – North Peak</a></li>
        <li><a class="nh48-quick-footer__link" href="/peaks/mount-hancock-south">Mount Hancock – South Peak</a></li>
        <li><a class="nh48-quick-footer__link" href="/peaks/mount-hale">Mount Hale</a></li>
      </ul>
    </div>
    <div class="nh48-quick-footer__group">
      <h2>Northern Summits</h2>
      <ul class="nh48-quick-footer__list">
        <li><a class="nh48-quick-footer__link" href="/peaks/mount-cabot">Mount Cabot</a></li>
        <li><a class="nh48-quick-footer__link" href="/peaks/mount-waumbek">Mount Waumbek</a></li>
      </ul>
    </div>
    <div class="nh48-quick-footer__group">
      <h2>Western &amp; Outlying</h2>
      <ul class="nh48-quick-footer__list">
        <li><a class="nh48-quick-footer__link" href="/peaks/mount-moosilauke">Mount Moosilauke</a></li>
        <li><a class="nh48-quick-footer__link" href="/peaks/mount-willey">Mount Willey</a></li>
        <li><a class="nh48-quick-footer__link" href="/peaks/mount-field">Mount Field</a></li>
        <li><a class="nh48-quick-footer__link" href="/peaks/mount-tom">Mount Tom</a></li>
      </ul>
    </div>
  </div>
  <div class="nh48-quick-footer__meta">
    <div class="nh48-quick-footer__legal">© 2024 NH48 API · White Mountains data, trails &amp; photos</div>
    <div class="nh48-quick-footer__meta-links" aria-label="Footer navigation links">
      <a href="/catalog">Catalog</a>
      <a href="/trails">White Mountain Trails</a>
      <a href="/long-trails">Long Trails</a>
      <a href="https://nh48pics.com" target="_blank" rel="noopener">NH48 Pics</a>
      <a href="https://nh48.app" target="_blank" rel="noopener">Peak Bagger</a>
      <a href="https://www.instagram.com/nate_dumps_pics/" target="_blank" rel="noopener">Latest WMNF Photos</a>
    </div>
  </div>
</footer>

</body>
</html>
